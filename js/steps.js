/**
 * WooCommerce Mustistep Checkout by BoostPlugins
 */
 jQuery(document).ready(function(e){function i(){var e=jQuery(".woocommerce-checkout-review-order-table").first().clone();jQuery(e).removeClass("woocommerce-checkout-review-order-table").addClass("review-table");var i="";jQuery(e).find('td[data-title="Shipping"]').length&&(i=jQuery(e).find("#shipping_method").length?jQuery(e).find(".shipping_method:checked").siblings("label").text():jQuery(e).find('td[data-title="Shipping"]').text(),jQuery(e).find('td[data-title="Shipping"]').empty().text(i)),jQuery(".w3nmsc-review-order-details").html(e)}function s(){var e={firstName:jQuery("#billing_first_name").length?jQuery("#billing_first_name").val():"",lastName:jQuery("#billing_last_name").length?jQuery("#billing_last_name").val():"",company:jQuery("#billing_company").length?jQuery("#billing_company").val():"",email:jQuery("#billing_email").length?jQuery("#billing_email").val():"",phone:jQuery("#billing_phone").length?jQuery("#billing_phone").val():"",country:jQuery("#billing_country").length?jQuery("#billing_country option:selected").text():"",state:jQuery("#billing_state").length?jQuery("#billing_state").is("select")?jQuery("#billing_state option:selected").text():jQuery("#billing_state").val():"",city:jQuery("#billing_city").length?jQuery("#billing_city").val():"",firstAddress:jQuery("#billing_address_1").length?jQuery("#billing_address_1").val():"",secondAddress:jQuery("#billing_address_2").length?jQuery("#billing_address_2").val():"",zipcode:jQuery("#billing_postcode").length?jQuery("#billing_postcode").val():""},i="";if((""!=e.firstName||""!=e.lastName)&&(i=e.firstName+" "+e.lastName+"<br>"),""!=e.company&&(i+=e.company+"<br>"),""!=e.firstAddress&&(i+=e.firstAddress+"<br>"),""!=e.secondAddress&&(i+=e.secondAddress+"<br>"),""!=e.city&&(i+=e.city+", "),""!=e.state&&(i+=e.state+" "),""!=e.zipcode&&(i+=e.zipcode),""!=e.country&&(i+="<br>"+e.country),jQuery(".w3nmsc-billing-address").html(i),jQuery(".w3nmsc-customer-email").html(e.email),jQuery(".w3nmsc-customer-phone").html(e.phone),jQuery("#billing_email").length||jQuery(".w3nmsc-customer-details li").first().remove(),jQuery("#billing_phone").length||jQuery(".w3nmsc-customer-details li").last().remove(),jQuery("#billing_email").length||jQuery("#billing_phone").length||jQuery(".w3nmsc-customer-details").remove(),jQuery("#ship-to-different-address-checkbox").is(":checked")){var s={firstName:jQuery("#shipping_first_name").length?jQuery("#shipping_first_name").val():"",lastName:jQuery("#shipping_last_name").length?jQuery("#shipping_last_name").val():"",company:jQuery("#shipping_company").length?jQuery("#shipping_company").val():"",country:jQuery("#shipping_country").length?jQuery("#shipping_country option:selected").text():"",state:jQuery("#shipping_state").length?jQuery("#shipping_state").is("select")?jQuery("#shipping_state option:selected").text():jQuery("#shipping_state").val():"",city:jQuery("#shipping_city").length?jQuery("#shipping_city").val():"",firstAddress:jQuery("#shipping_address_1").length?jQuery("#shipping_address_1").val():"",secondAddress:jQuery("#shipping_address_2").length?jQuery("#shipping_address_2").val():"",zipcode:jQuery("#shipping_postcode").length?jQuery("#shipping_postcode").val():""},r="";(""!=s.firstName||""!=s.lastName)&&(r=s.firstName+" "+s.lastName+"<br>"),""!=s.company&&(r+=s.company+"<br>"),""!=s.firstAddress&&(r+=s.firstAddress+"<br>"),""!=s.secondAddress&&(r+=s.secondAddress+"<br>"),""!=s.city&&(r+=s.city+", "),""!=s.state&&(r+=s.state+" "),""!=s.zipcode&&(r+=s.zipcode),""!=s.country&&(r+="<br>"+s.country),jQuery(".w3nmsc-shipping-address").html(r)}else jQuery(".w3nmsc-shipping-address").html(i)}function r(i){if(result=jQuery(".form-row#"+i+"_postcode_field").length>0&&0!=jQuery("#"+i+"_postcode").val()&&jQuery("#"+i+"_country").length>0&&0!=jQuery("#"+i+"_country").val(),result){var s={action:"zip_validation",country:jQuery("#"+i+"_country").val(),postCode:jQuery("#"+i+"_postcode").val()};e("#w3nSteps").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),jQuery.post(w3nmsc_steps.ajaxurl,s,function(s){return e("#w3nSteps").unblock(),0==s?(jQuery("#"+i+"_postcode").parent().removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-required-field"),jQuery("#"+i+"_postcode").append('<label class="error-class">'+w3nmsc_steps.zipcode_error_msg+"</label>"),!1):(jQuery("#"+i+"_postcode").find("label.error-class").remove(),!0)})}}function n(){var i=!1;return jQuery("form.checkout").valid()&&(i=!0),0==w3nmsc_steps.isAuthorizedUser&&(e("#shipping_state_field").is(":visible")&&e("#shipping_state").is(["required"])&&(e("#shipping_state_field").hasClass("woocommerce-validated")?(e("#shipping_state_field").find("label.error-class").remove(),e("#s2id_shipping_state").removeClass("invalid-state")):(e("#shipping_state_field").has("label.error-class").length||(e("#s2id_shipping_state").addClass("invalid-state"),e("#shipping_state_field").append('<label class="error-class">'+w3nmsc_steps.error_msg+"</label>")),i=!1)),e("#billing_state_field").is(":visible")&&e("#billing_state").is(["required"])&&(e("#billing_state_field").hasClass("woocommerce-validated")?(e("#billing_state_field").find("label.error-class").remove(),e("#s2id_billing_state").removeClass("invalid-state")):(e("#billing_state_field").has("label.error-class").length||(e("#s2id_billing_state").addClass("invalid-state"),e("#billing_state_field").append('<label class="error-class">'+w3nmsc_steps.error_msg+"</label>")),i=!1))),w3nmsc_steps.isAuthorizedUser&&(e("#billing_state_field").is(":visible")&&e("#billing_state").is(["required"])&&(""==e.trim(e("#billing_state").val())?(e("#s2id_billing_state").addClass("invalid-state"),e("#billing_state_field").has(".error-class").length||e("#billing_state_field").has("label.error").length||e("#billing_state_field label.error").is(":visible")||e("#billing_state_field").append('<label class="error-class">'+w3nmsc_steps.error_msg+"</label>"),i=!1):(e("#billing_state_field").find("label.error-class").remove(),e("#s2id_billing_state").removeClass("invalid-state"))),e("#shipping_state_field").is(":visible")&&(e("#shipping_state").is(["required"])?""==e.trim(e("#shipping_state").val())&&(e("#s2id_shipping_state").addClass("invalid-state"),e("#shipping_state_field").has("label.error").length||e("#shipping_state_field label.error").is(":visible")||e("#shipping_state_field").append('<label class="error-class">'+w3nmsc_steps.error_msg+"</label>"),i=!1):(e("#shipping_state_field").find("label.error-class").remove(),e("#s2id_shipping_state").removeClass("invalid-state")))),"yes"==w3nmsc_steps.zipcode_validation&&jQuery("#billing_postcode").closest("#billing_postcode_field").hasClass("woocommerce-invalid")&&(i=!1),"yes"==w3nmsc_steps.zipcode_validation&&jQuery("#ship-to-different-address-checkbox").is(":checked")&&jQuery("#ship-to-different-address-checkbox").is(":visible")&&(jQuery("#shipping_postcode").closest("#shipping_postcode_field").hasClass("woocommerce-validated")||(i=!1)),p()||(i=!1),i}function t(e){jQuery("form.login input#"+e).parent().removeClass("woocommerce-validated"),jQuery("form.login input#"+e).parent().addClass("woocommerce-invalid woocommerce-invalid-required-field"),jQuery("form.login input#"+e).parent().addClass("validate-required")}function l(){return validate=!1,jQuery("#w3nSteps div.current").find("form.checkout_coupon").length&&(validate=!0),validate}function o(){jQuery(".coupon-step").hasClass("current")&&("fade"===w3nmsc_steps.transitionEffect?jQuery("form.checkout_coupon").appendTo(".coupon-step").fadeIn(100):jQuery("form.checkout_coupon").appendTo(".coupon-step").slideDown(100))}function u(){jQuery("true"==w3nmsc_steps.include_register_form)?target_form="#customer_login":target_form="form.woocommerce-form-login",jQuery(".login-step").hasClass("current")?"fade"==w3nmsc_steps.transitionEffect?jQuery(target_form).appendTo(".login-step").fadeIn(100):jQuery(target_form).appendTo(".login-step").slideDown(100):jQuery(".login-step").length&&jQuery(target_form).hide().appendTo(".container-coupon-login-form")}function p(){var i=!0;return jQuery('input[name="legal"]').length&&jQuery('input[name="legal"]').is(":visible")&&(jQuery('input[name="legal"]').is(":checked")?(jQuery('input[name="legal"]').parent().removeAttr("style"),jQuery(".terms-error").remove(),i=!0):(jQuery('input[name="legal"]').attr("required","required"),jQuery(".terms").css("border","1px solid #8a1f11"),e(".terms-error").length||jQuery('<p class="terms-error">'+w3nmsc_steps.terms_error+"</p>").insertAfter(".wc-terms-and-conditions"),i=!1)),jQuery('input[name="terms"]').length&&jQuery('input[name="terms"]').is(":visible")&&(jQuery('input[name="terms"]').is(":checked")?(jQuery('input[name="terms"]').parent().removeAttr("style"),jQuery(".terms-error").remove(),i=!0):(jQuery('input[name="terms"]').attr("required","required"),jQuery('input[name="terms"]').parent().css("border","1px solid #8a1f11"),e(".terms-error").length||jQuery('<p class="terms-error">'+w3nmsc_steps.terms_error+"</p>").insertAfter(".wc-terms-and-conditions"),i=!1)),i}if(e(".w3nmsc-loading-img").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),jQuery("form.checkout").show(),jQuery("form.checkout .validate-required :input").attr("required","required"),jQuery("form.checkout .validate-email .input-text").addClass("email"),0==w3nmsc_steps.isAuthorizedUser&&"false"!=w3nmsc_steps.include_login&&"no"!=w3nmsc_steps.woo_include_login)var d=w3nmsc_steps.no_account_btn;else var d=w3nmsc_steps.next;var d;"yes"==w3nmsc_steps.remove_numbers?jQuery("#w3nSteps").steps({transitionEffect:w3nmsc_steps.transitionEffect,stepsOrientation:w3nmsc_steps.stepsOrientation,enableAllSteps:!1,enablePagination:w3nmsc_steps.enablePagination,titleTemplate:"#title#",labels:{next:d,previous:w3nmsc_steps.previous,finish:w3nmsc_steps.finish},onInit:function(i,s){e(".w3nmsc-loading-img").hide(),e(".actions > ul > li:first-child").attr("style","display:none")},onStepChanging:function(r,t,o){return m||i(),s(),e(this).trigger("onStepChanging",[a=r,b=t,c=o]),0==t&&0==w3nmsc_steps.isAuthorizedUser&&"false"!=w3nmsc_steps.include_login&&"no"!=w3nmsc_steps.woo_include_login||t>o||l()?!0:n()},onStepChanged:function(i,s,r){e(this).trigger("onStepChanged",[a=i,b=s,c=r]),s>0?e(".actions > ul > li:first-child").attr("style",""):e(".actions > ul > li:first-child").attr("style","display:none"),0==s&&0==w3nmsc_steps.isAuthorizedUser&&"false"!=w3nmsc_steps.include_login&&"no"!=w3nmsc_steps.woo_include_login?(jQuery('form.checkout a[href="#next"]').html(w3nmsc_steps.no_account_btn),jQuery('form.checkout a[href="#previous"]').hide()):(jQuery('form.checkout a[href="#next"]').html(w3nmsc_steps.next),jQuery('form.checkout a[href="#previous"]').show())},onFinishing:function(i,s){e(this).trigger("onFinishing")}}):jQuery("#w3nSteps").steps({transitionEffect:w3nmsc_steps.transitionEffect,stepsOrientation:w3nmsc_steps.stepsOrientation,enableAllSteps:!1,enablePagination:w3nmsc_steps.enablePagination,titleTemplate:'<span class="number">#index#.</span><span class="namebox">#title#</span>',labels:{next:d,previous:w3nmsc_steps.previous,finish:w3nmsc_steps.finish},onInit:function(i,s){e(".w3nmsc-loading-img").hide(),e(".actions > ul > li:first-child").attr("style","display:none")},onStepChanging:function(r,t,o){return m||i(),s(),e(this).trigger("onStepChanging",[a=r,b=t,c=o]),0==t&&0==w3nmsc_steps.isAuthorizedUser&&"false"!=w3nmsc_steps.include_login&&"no"!=w3nmsc_steps.woo_include_login||t>o||l()?!0:n()},onStepChanged:function(i,s,r){e(this).trigger("onStepChanged",[a=s,b=s,c=r]),s>0?e(".actions > ul > li:first-child").attr("style",""):e(".actions > ul > li:first-child").attr("style","display:none"),0==s&&0==w3nmsc_steps.isAuthorizedUser&&"false"!=w3nmsc_steps.include_login&&"no"!=w3nmsc_steps.woo_include_login?(jQuery('form.checkout a[href="#next"]').html(w3nmsc_steps.no_account_btn),jQuery('form.checkout a[href="#previous"]').hide()):(jQuery('form.checkout a[href="#next"]').html(w3nmsc_steps.next),jQuery('form.checkout a[href="#previous"]').show())},onFinishing:function(i,s){e(this).trigger("onFinishing")}});var m=jQuery(".w3nmsc-order-review-step").find(".woocommerce-checkout-review-order-table").length;jQuery.extend(jQuery.validator.messages,{required:w3nmsc_steps.error_msg,email:w3nmsc_steps.email_error_msg}),jQuery(".actions > ul li:last a").addClass("finish-btn"),jQuery(".finish-btn").click(function(){jQuery("#place_order").trigger("click")});var _=jQuery("#w3nSteps ul[role='tablist'] > li").length;if(5==_&&jQuery("#w3nSteps").addClass("five-steps"),3==_&&jQuery("#w3nSteps").addClass("three-steps"),"vertical"!=w3nmsc_steps.stepsOrientation){var _=jQuery("#w3nSteps ul[role='tablist'] > li").length,g=100/_;e("#w3nSteps .steps ul li").css("width",g+"%")}"yes"==w3nmsc_steps.zipcode_validation&&(jQuery("body").on("change","#billing_country",function(){jQuery("#billing_country").is(":visible")&&r("billing")}),jQuery("body").on("blur","#billing_postcode",function(){jQuery("#billing_postcode").is(":visible")&&r("billing")}),jQuery("body").on("change","#shipping_country",function(){jQuery("#shipping_country").is(":visible")&&r("shipping")}),jQuery("body").on("blur","#shipping_postcode",function(){jQuery("#shipping_postcode").is(":visible")&&r("shipping")})),jQuery(document).on("click","#w3nSteps form.login .button, #w3nSteps .woocommerce-form-login .button",function(i){if("false"!=w3nmsc_steps.include_login){i.preventDefault();var s="form.login",r=!1;if(0==jQuery(s+" input#username").val()&&(r=!0,t("username")),0==jQuery(s+" input#password").val()&&(r=!0,t("password")),1==r)return jQuery("form.login").prepend('<p class="error-msg">Required username/password.</p>'),!1;0==jQuery(s+" input#rememberme").is(":checked")?rememberme=!1:rememberme=!0,e("#w3nSteps").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var n={action:"w3nmscheckout_login",username:jQuery(s+" input#username").val(),password:jQuery(s+" input#password").val(),rememberme:rememberme,_ajax_nonce:w3nmsc_steps.login_nonce};jQuery.post(w3nmsc_steps.ajaxurl,n,function(e){jQuery("#w3nSteps").unblock(),"successfully"==e?location.reload():jQuery("form.login > .error-msg").length||jQuery("form.login").prepend(e)})}}),jQuery(document).on("click","#w3nSteps form.register .button",function(i){i.preventDefault(),e("#w3nSteps").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var s={action:"w3nmscheckout_registration",username:jQuery.trim(jQuery("#reg_username").val()),email:jQuery.trim(jQuery("#reg_email").val()),password:jQuery.trim(jQuery("#reg_password").val()),_ajax_nonce:w3nmsc_steps.register_nonce};jQuery.post(w3nmsc_steps.ajaxurl,s,function(i){e("#w3nSteps").unblock(),"success"==i?location.reload():(jQuery(".register_form_error").remove(),jQuery("form.register").prepend(i))})}),jQuery("#billing_phone").on("blur input change",function(){if(jQuery("#billing_phone").length&&jQuery(this).prop("required")){var e=jQuery("#billing_phone").val();e=e.replace(/[\s\#0-9_\-\+\(\)]/g,""),e=jQuery.trim(e),""!=jQuery(this).val()&&jQuery("#billing_phone").next("label.error").remove(),e.length>0?(jQuery("#billing_phone_field").removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-required-field"),jQuery("#billing_phone_field").has("label.error-class").length||jQuery("#billing_phone_field").append('<label class="error-class">'+w3nmsc_steps.phone_error_msg+"</label>")):jQuery("#billing_phone_field").has("label.error-class").length&&jQuery("#billing_phone").next().remove()}}),jQuery("#billing_email").on("blur input change",function(){jQuery("#billing_email").length&&(""!=jQuery(this).val()&&jQuery("#billing_email").next("label.error").remove(),jQuery("#billing_email_field").hasClass("woocommerce-invalid-email")?jQuery("#billing_email_field").append('<label id="billing_email-error" class="error" for="billing_email">'+w3nmsc_steps.email_error_msg+"</label>"):jQuery("#billing_email_field").has("label.error-class").length&&jQuery("#billing_email").next().remove())}),jQuery(document).ajaxComplete(function(e,s,r){var n=r.url.split("=");"update_order_review"!=n[1]||m||i()}),e(window).keydown(function(e){return 13==e.keyCode?(e.preventDefault(),!1):void 0}),e("form.checkout").submit(function(e){jQuery(".terms-error").is(":visible")&&(e.preventDefault(),e.stopImmediatePropagation())}),jQuery("#w3nSteps").on("onStepChanged",function(e,i,s){o(),u()}),jQuery("#w3nSteps").on("onFinishing",function(){p()}),jQuery(document).ready(function(){jQuery("#hide-register").hide(),jQuery("#w3n-login").hide();var e=500;jQuery("#w3n-register").click(function(){jQuery("#w3n-register").hide(),jQuery("#hide-register").slideDown(e),jQuery("#hide-login").slideUp(e),setTimeout(function(){jQuery("#w3n-login").show()},e+1)}),jQuery("#w3n-login").click(function(){jQuery("#w3n-login").hide(),jQuery("#hide-login").slideDown(e),jQuery("#hide-register").slideUp(e),setTimeout(function(){jQuery("#w3n-register").show()},e+1)})})});